# ============================================================================
# Sunrise ITSM AI Triage API - Environment Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit the .env file to version control
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Flask Environment (development/production)
# - development: Enables debug mode, allows localhost API bypass
# - production: Disables debug features, enforces strict security
FLASK_ENV=production

# Flask Debug Mode (true/false)
# WARNING: MUST be false in production
FLASK_DEBUG=false

# Server Port (default: 8000)
PORT=8000

# Logging Level (DEBUG/INFO/WARNING/ERROR/CRITICAL)
LOG_LEVEL=INFO

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# API Key for endpoint authentication
# Generate a strong random key: python -c \"import secrets; print(secrets.token_urlsafe(32))\"
# REQUIRED: Must be set for production
API_KEY=your-secure-api-key-here-change-this

# CORS Allowed Origins (comma-separated list of allowed domains)
# Examples:
#   - Single domain: https://your-app.azurewebsites.net
#   - Multiple domains: https://app1.com,https://app2.com
#   - Localhost (dev only): http://localhost:3000,http://localhost:8080
# Leave empty to disable CORS (not recommended for web apps)
CORS_ALLOWED_ORIGINS=*

# Rate Limiting Storage URI (optional)
# Examples:
#   - In-memory (default): memory://
#   - Redis: redis://localhost:6379
#   - Memcached: memcached://localhost:11211
# RATE_LIMIT_STORAGE_URI=memory://

# ============================================================================
# AZURE OPENAI CONFIGURATION
# ============================================================================

# Azure OpenAI Endpoint
# Example: https://your-resource-name.openai.azure.com/
# REQUIRED: Get from Azure OpenAI resource
AZURE_OPENAI_ENDPOINT=https://your-openai-resource.openai.azure.com/

# Azure OpenAI API Key
# REQUIRED: Get from Azure OpenAI resource Keys page
AZURE_OPENAI_API_KEY=your-azure-openai-api-key-here

# Azure OpenAI Embedding Deployment Name
# The name of your text-embedding-3-small deployment
# Default: text-embedding-3-small
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small

# Azure OpenAI Chat Deployment Name
# The name of your GPT-4 or GPT-4-mini deployment
# Default: gpt-4.1-mini
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4.1-mini

# Azure OpenAI API Version (usually doesn't need to change)
# AZURE_OPENAI_API_VERSION=2024-10-21

# OpenAI Request Timeout (seconds)
# Default: 30
# OPENAI_TIMEOUT=30

# ============================================================================
# AZURE COGNITIVE SEARCH CONFIGURATION
# ============================================================================

# Azure Cognitive Search Endpoint
# Example: https://your-search-service.search.windows.net
# REQUIRED: Get from Azure Cognitive Search resource
AZURE_SEARCH_ENDPOINT=https://your-search-service.search.windows.net

# Azure Cognitive Search API Key
# REQUIRED: Get from Azure Cognitive Search resource Keys page
AZURE_SEARCH_API_KEY=your-azure-search-api-key-here

# Azure Search Vector Index Name
# The name of your vector search index containing incidents/problems/knowledge
# Default: itsm-incidents-vector-v2
AZURE_SEARCH_VECTOR_INDEX=itsm-incidents-vector-v2

# ============================================================================
# DATABASE CONFIGURATION (if using pyodbc)
# ============================================================================

# SQL Server Connection String (optional - only if direct DB access is needed)
# Example: Driver={ODBC Driver 17 for SQL Server};Server=your-server.database.windows.net;Database=your-db;Uid=your-user;Pwd=your-password;Encrypt=yes;TrustServerCertificate=no;
# DATABASE_CONNECTION_STRING=

# ============================================================================
# MONITORING & LOGGING (Azure Application Insights)
# ============================================================================

# Application Insights Connection String (optional but recommended for production)
# Example: InstrumentationKey=00000000-0000-0000-0000-000000000000;IngestionEndpoint=https://...
# APPLICATIONINSIGHTS_CONNECTION_STRING=

# Application Insights Instrumentation Key (legacy - use connection string instead)
# APPINSIGHTS_INSTRUMENTATIONKEY=

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Thread Pool Max Workers (for concurrent operations)
# Default: 3
# THREAD_POOL_MAX_WORKERS=3

# Search Result Limits
# Maximum number of search results to retrieve
# Default: 5 for semantic search, 5 for reference
# MAX_SEARCH_RESULTS=5

# AI Temperature (0.0 = deterministic, 1.0 = creative)
# Default: 0.0 (for consistent categorization)
# DEFAULT_AI_TEMPERATURE=0.0

# ============================================================================
# DEVELOPMENT & TESTING
# ============================================================================

# Enable detailed request logging (shows full request payloads)
# WARNING: Can log sensitive data, only use in development
# ENABLE_REQUEST_LOGGING=false

# Enable AI prompt debugging
# Shows detailed prompt construction and token usage
# ENABLE_PROMPT_DEBUG=false

# ============================================================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ============================================================================
#
# REQUIRED VARIABLES (must be set):
# - API_KEY
# - AZURE_OPENAI_ENDPOINT
# - AZURE_OPENAI_API_KEY
# - AZURE_OPENAI_EMBEDDING_DEPLOYMENT
# - AZURE_OPENAI_CHAT_DEPLOYMENT
# - AZURE_SEARCH_ENDPOINT
# - AZURE_SEARCH_API_KEY
# - AZURE_SEARCH_VECTOR_INDEX
# - CORS_ALLOWED_ORIGINS (unless API-only, no web UI)
#
# SECURITY CHECKLIST:
# âœ“ Set FLASK_ENV=production
# âœ“ Set FLASK_DEBUG=false
# âœ“ Generate strong API_KEY (32+ characters)
# âœ“ Configure CORS_ALLOWED_ORIGINS to specific domains
# âœ“ Enable Application Insights for monitoring
# âœ“ Use Azure Key Vault for secrets (recommended)
# âœ“ Rotate API keys regularly
# âœ“ Never commit .env file to git
#
# AZURE APP SERVICE CONFIGURATION:
# - Set these as Application Settings in Azure Portal
# - Restart the app after changing environment variables
# - Use Azure Key Vault references for sensitive values:
#   @Microsoft.KeyVault(SecretUri=https://your-vault.vault.azure.net/secrets/secret-name/)
#
# ============================================================================
